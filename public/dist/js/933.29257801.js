"use strict";(self["webpackChunkskeleton_spa_vue3_bootstrap5_primevue_pwa_ts"]=self["webpackChunkskeleton_spa_vue3_bootstrap5_primevue_pwa_ts"]||[]).push([[933],{1933:function(e,s,a){a.r(s),a.d(s,{default:function(){return ge}});var t=a(6768),r=a(4232);const i={class:"user-detail-container"},l={class:"d-flex justify-content-between align-items-center mb-4"},d={key:0,class:"loading-container"},n={key:1,class:"alert alert-danger"},c={key:2,class:"user-details-wrapper"},o={class:"row"},u={class:"col-md-4 mb-4"},m={class:"card profile-card"},v={class:"card-body text-center"},k={class:"user-name"},p={class:"user-username text-muted"},f={class:"user-role mb-3"},g={class:"user-status mb-3"},L={class:"user-since"},b={class:"text-muted"},_={class:"col-md-8"},w={class:"card mb-4"},h={class:"card-body"},y={class:"row mb-3"},C={class:"col-md-8"},D={class:"row mb-3"},E={class:"col-md-8"},A={class:"row mb-3"},x={class:"col-md-8"},N={class:"row mb-3"},X={class:"col-md-8"},I={class:"row mb-3"},R={class:"col-md-8"},T=["href"],F={class:"row mb-3"},S={class:"col-md-8"},U={class:"row mb-3"},W={class:"col-md-8"},B={class:"row mb-3"},K={class:"col-md-8"},$={class:"card mb-4"},j={class:"card-body"},q={class:"row mb-3"},M={class:"col-md-8"},P={class:"row mb-3"},V={class:"col-md-8"},z={class:"row mb-3"},G={class:"col-md-8"},H={class:"row mb-3"},J={class:"col-md-8"},O={key:0,class:"text-success"},Q={key:1,class:"text-danger"},Y={class:"row"},Z={class:"col-md-8"},ee={key:0},se={key:1,class:"text-muted"},ae={class:"card"},te={class:"card-body"},re={key:0},ie={class:"activity-icon"},le={class:"activity-content"},de={class:"activity-description"},ne={class:"activity-time text-muted"},ce={key:1,class:"text-muted"};function oe(e,s,a,oe,ue,me){const ve=(0,t.g2)("router-link");return(0,t.uX)(),(0,t.CE)("div",i,[(0,t.Lk)("div",l,[s[3]||(s[3]=(0,t.Lk)("h1",{class:"page-title"},"Détails de l'utilisateur",-1)),(0,t.Lk)("div",null,[(0,t.bF)(ve,{to:"/dashboard/gestionutilisateur",class:"btn btn-outline-secondary me-2"},{default:(0,t.k6)(()=>s[0]||(s[0]=[(0,t.Lk)("i",{class:"fas fa-arrow-left me-1"},null,-1),(0,t.eW)(" Retour à la liste ",-1)])),_:1,__:[0]}),s[2]||(s[2]=(0,t.Lk)("button",{class:"btn btn-outline-warning me-2"},[(0,t.Lk)("i",{class:"fas fa-edit me-1"}),(0,t.eW)(" Modifier ")],-1)),(0,t.bF)(ve,{to:`/dashboard/gestionutilisateur/supression/${e.user.id}`,class:"btn btn-outline-danger"},{default:(0,t.k6)(()=>s[1]||(s[1]=[(0,t.Lk)("i",{class:"fas fa-trash me-1"},null,-1),(0,t.eW)(" Supprimer ",-1)])),_:1,__:[1]},8,["to"])])]),e.loading?((0,t.uX)(),(0,t.CE)("div",d,s[4]||(s[4]=[(0,t.Lk)("div",{class:"spinner-border text-primary",role:"status"},[(0,t.Lk)("span",{class:"visually-hidden"},"Chargement...")],-1),(0,t.Lk)("p",{class:"mt-2"},"Chargement des informations utilisateur...",-1)]))):e.error?((0,t.uX)(),(0,t.CE)("div",n,[s[5]||(s[5]=(0,t.Lk)("i",{class:"fas fa-exclamation-triangle me-2"},null,-1)),(0,t.eW)(" "+(0,r.v_)(e.error),1)])):((0,t.uX)(),(0,t.CE)("div",c,[(0,t.Lk)("div",o,[(0,t.Lk)("div",u,[(0,t.Lk)("div",m,[(0,t.Lk)("div",v,[s[6]||(s[6]=(0,t.Lk)("div",{class:"user-avatar-lg mb-3"},[(0,t.Lk)("i",{class:"fas fa-user"})],-1)),(0,t.Lk)("h2",k,(0,r.v_)(e.user.name),1),(0,t.Lk)("p",p,(0,r.v_)(e.user.email),1),(0,t.Lk)("div",f,[(0,t.Lk)("span",{class:(0,r.C4)(e.getRoleBadgeClass(e.user.role||"Utilisateur"))},(0,r.v_)(e.user.role||"Utilisateur"),3)]),(0,t.Lk)("div",g,[(0,t.Lk)("span",{class:(0,r.C4)(e.getStatusBadgeClass(e.user.statut||"Actif"))},(0,r.v_)(e.user.statut||"Actif"),3)]),(0,t.Lk)("div",L,[(0,t.Lk)("small",b,"Membre depuis "+(0,r.v_)(e.formatDate(e.user.created_at)),1)])])])]),(0,t.Lk)("div",_,[(0,t.Lk)("div",w,[s[15]||(s[15]=(0,t.Lk)("div",{class:"card-header"},[(0,t.Lk)("h5",{class:"card-title mb-0"},[(0,t.Lk)("i",{class:"fas fa-info-circle me-2"}),(0,t.eW)(" Informations personnelles ")])],-1)),(0,t.Lk)("div",h,[(0,t.Lk)("div",y,[s[7]||(s[7]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"ID Utilisateur",-1)),(0,t.Lk)("div",C,(0,r.v_)(e.user.id),1)]),(0,t.Lk)("div",D,[s[8]||(s[8]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"Nom complet",-1)),(0,t.Lk)("div",E,(0,r.v_)(e.user.name),1)]),(0,t.Lk)("div",A,[s[9]||(s[9]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"Prénom",-1)),(0,t.Lk)("div",x,(0,r.v_)(e.user.prenom||"Non renseigné"),1)]),(0,t.Lk)("div",N,[s[10]||(s[10]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"Nom",-1)),(0,t.Lk)("div",X,(0,r.v_)(e.user.nom||"Non renseigné"),1)]),(0,t.Lk)("div",I,[s[11]||(s[11]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"Email",-1)),(0,t.Lk)("div",R,[(0,t.Lk)("a",{href:`mailto:${e.user.email}`},(0,r.v_)(e.user.email),9,T)])]),(0,t.Lk)("div",F,[s[12]||(s[12]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"Téléphone",-1)),(0,t.Lk)("div",S,(0,r.v_)(e.user.telephone1||"Non renseigné"),1)]),(0,t.Lk)("div",U,[s[13]||(s[13]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"Date de naissance",-1)),(0,t.Lk)("div",W,(0,r.v_)(e.user.date_naissance?e.formatDate(e.user.date_naissance):"Non renseigné"),1)]),(0,t.Lk)("div",B,[s[14]||(s[14]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"Adresse",-1)),(0,t.Lk)("div",K,(0,r.v_)(e.user.adresse||"Non renseignée"),1)])])]),(0,t.Lk)("div",$,[s[21]||(s[21]=(0,t.Lk)("div",{class:"card-header"},[(0,t.Lk)("h5",{class:"card-title mb-0"},[(0,t.Lk)("i",{class:"fas fa-shield-alt me-2"}),(0,t.eW)(" Sécurité et accès ")])],-1)),(0,t.Lk)("div",j,[(0,t.Lk)("div",q,[s[16]||(s[16]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"Rôle",-1)),(0,t.Lk)("div",M,[(0,t.Lk)("span",{class:(0,r.C4)(e.getRoleBadgeClass(e.user.role||"Utilisateur"))},(0,r.v_)(e.user.role||"Utilisateur"),3)])]),(0,t.Lk)("div",P,[s[17]||(s[17]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"Statut",-1)),(0,t.Lk)("div",V,[(0,t.Lk)("span",{class:(0,r.C4)(e.getStatusBadgeClass(e.user.statut||"Actif"))},(0,r.v_)(e.user.statut||"Actif"),3)])]),(0,t.Lk)("div",z,[s[18]||(s[18]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"Dernière mise à jour",-1)),(0,t.Lk)("div",G,(0,r.v_)(e.formatDate(e.user.updated_at)),1)]),(0,t.Lk)("div",H,[s[19]||(s[19]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"Signature",-1)),(0,t.Lk)("div",J,[e.user.signature?((0,t.uX)(),(0,t.CE)("span",O,(0,r.v_)(e.user.signature),1)):((0,t.uX)(),(0,t.CE)("span",Q,"Non définie"))])]),(0,t.Lk)("div",Y,[s[20]||(s[20]=(0,t.Lk)("div",{class:"col-md-4 fw-bold"},"Permissions",-1)),(0,t.Lk)("div",Z,[e.user.permissions&&e.user.permissions.length>0?((0,t.uX)(),(0,t.CE)("div",ee,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.user.permissions,e=>((0,t.uX)(),(0,t.CE)("span",{key:e,class:"badge bg-info me-1 mb-1"},(0,r.v_)(e),1))),128))])):((0,t.uX)(),(0,t.CE)("span",se,"Aucune permission spécifique"))])])])]),(0,t.Lk)("div",ae,[s[22]||(s[22]=(0,t.Lk)("div",{class:"card-header"},[(0,t.Lk)("h5",{class:"card-title mb-0"},[(0,t.Lk)("i",{class:"fas fa-history me-2"}),(0,t.eW)(" Activité récente ")])],-1)),(0,t.Lk)("div",te,[e.user.activities&&e.user.activities.length>0?((0,t.uX)(),(0,t.CE)("div",re,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.user.activities,(s,a)=>((0,t.uX)(),(0,t.CE)("div",{key:a,class:"activity-item"},[(0,t.Lk)("div",ie,[(0,t.Lk)("i",{class:(0,r.C4)(e.getActivityIcon(s.type))},null,2)]),(0,t.Lk)("div",le,[(0,t.Lk)("div",de,(0,r.v_)(s.description),1),(0,t.Lk)("div",ne,(0,r.v_)(e.formatDateTime(s.timestamp)),1)])]))),128))])):((0,t.uX)(),(0,t.CE)("p",ce,"Aucune activité récente"))])])])])]))])}var ue=a(144),me=a(1387),ve=a(4373),ke=(0,t.pM)({name:"ShowView",setup(){const e=(0,me.lq)(),s=(0,ue.KR)(!1),a=(0,ue.KR)(null),r=(0,ue.KR)(e.params.id);console.log("ID utilisateur depuis la route:",r.value);const i=(0,ue.KR)({id:0,name:"",email:"",telephone1:"",adresse:"",role:"",statut:"",created_at:"",updated_at:""});i.value=i.value;const l=async()=>{s.value=!0,a.value=null,console.log("Début de fetchUserData, ID:",r.value);try{console.log("Tentative de récupération des données utilisateur...");const e=await ve.A.get(`/api/users/${r.value}`,{headers:{Accept:"application/json","Content-Type":"application/json"},withCredentials:!0});console.log("Réponse reçue complète:",e);const s=e.data.data||e.data;console.log("Données utilisateur extraites:",s),s&&(i.value={...s,activities:[{type:"login",description:"Connexion au système",timestamp:s.updated_at||s.created_at},{type:"update",description:"Mise à jour du profil",timestamp:s.updated_at||s.created_at},{type:"file",description:"Téléchargement du fichier rapport-2025.pdf",timestamp:e.data.created_at},{type:"admin",description:"Modification des paramètres système",timestamp:e.data.created_at}]})}catch(e){console.error("Erreur lors de la récupération des données utilisateur:",e),e.response?(console.error("Données de la réponse d'erreur:",e.response.data),console.error("Statut de la réponse:",e.response.status),console.error("En-têtes de la réponse:",e.response.headers),a.value=`Erreur ${e.response.status}: ${e.response.data?.message||"Erreur lors de la récupération des données"}`):e.request?(console.error("Aucune réponse reçue:",e.request),a.value="Pas de réponse du serveur. Vérifiez votre connexion."):(console.error("Erreur de configuration de la requête:",e.message),a.value=`Erreur: ${e.message||"Impossible de charger les données utilisateur"}`)}finally{s.value=!1,console.log("Fin de fetchUserData, état de user:",i.value)}};(0,t.sV)(()=>{l()});const d=e=>{if(!e)return"Non renseigné";try{const s=new Date(e);return isNaN(s.getTime())?"Date invalide":new Intl.DateTimeFormat("fr-FR").format(s)}catch(a){return console.error("Erreur de formatage de date:",a),"Date invalide"}},n=e=>{if(!e)return"Non renseigné";try{const s=new Date(e);return isNaN(s.getTime())?"Date invalide":new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(s)}catch(a){return console.error("Erreur de formatage de date et heure:",a),"Date invalide"}},c=e=>{switch(e){case"Admin":return"badge bg-danger";case"Éditeur":return"badge bg-warning";default:return"badge bg-info"}},o=e=>{switch(e){case"Actif":return"badge bg-success";case"Inactif":return"badge bg-secondary";case"En attente":return"badge bg-warning";default:return"badge bg-light"}},u=e=>{switch(e){case"login":return"fas fa-sign-in-alt bg-info";case"logout":return"fas fa-sign-out-alt bg-secondary";case"update":return"fas fa-edit bg-warning";case"file":return"fas fa-file bg-primary";case"admin":return"fas fa-cog bg-danger";default:return"fas fa-circle bg-light"}};return{user:i,loading:s,error:a,formatDate:d,formatDateTime:n,getRoleBadgeClass:c,getStatusBadgeClass:o,getActivityIcon:u}}}),pe=a(1241);const fe=(0,pe.A)(ke,[["render",oe],["__scopeId","data-v-f9e1a634"]]);var ge=fe}}]);
//# sourceMappingURL=933.29257801.js.map