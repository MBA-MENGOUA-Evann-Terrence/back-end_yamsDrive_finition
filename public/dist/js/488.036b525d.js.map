{"version":3,"file":"js/488.036b525d.js","mappings":"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","sources":["webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/views/dashboard/corbeille/CorbeilleView.vue","webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/views/dashboard/corbeille/CorbeilleView.vue?f41c","webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/components/FileIcon.vue?e138","webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/components/FileIcon.vue","webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/components/FileIcon.vue?d8de"],"sourcesContent":["<template>\n    <div class=\"card\">\n        <div class=\"card-header d-flex justify-content-between align-items-center\">\n            <h1 class=\"card-title mb-0\">Corbeille</h1>\n            <button class=\"btn btn-outline-secondary btn-sm\" @click=\"showDebug = !showDebug\">\n                Afficher/Cacher Débogage\n            </button>\n        </div>\n        <div v-if=\"showDebug\" class=\"card-body bg-light border-bottom\">\n            <h5 class=\"text-dark\">Informations de débogage</h5>\n            <pre class=\"text-dark\">URL passée au composant AsdecodeTable: <strong>{{ tableUrl }}</strong>\n\nConfiguration du proxy (dans vue.config.js) pour cette URL:\n<strong>'/api': { target: 'http://127.0.0.1:8000' }</strong>\n\nLe navigateur doit donc appeler <strong>/api/documents/trash</strong>, et le proxy doit le rediriger vers <strong>http://127.0.0.1:8000/api/documents/trash</strong>.</pre>\n        </div>\n        <div class=\"card-body\">\n            <AsdecodeTable\n                ref=\"trashTable\"\n                :key=\"tableKey\"\n                :columns=\"columns\"\n                :url=\"tableUrl\"\n                table=\"documents\"\n                :show-top-stats=\"false\"\n                :show-bottom-stats=\"false\"\n                :searchable=\"false\"\n                @row-click=\"showLine\"\n            >\n                <template #nom=\"{ data }\">\n                    <div class=\"file-cell\">\n                        <FileIcon :fileName=\"data.nom\" />\n                        <span class=\"ms-2\">{{ data.nom }}</span>\n                    </div>\n                </template>\n                <template #type_lisible=\"{ data }\">\n                    <span class=\"badge bg-secondary\">{{ getFileType(data.nom) }}</span>\n                </template>\n                <template #service=\"{ data }\">\n                    <span v-if=\"data.service\">{{ data.service.nom }}</span>\n                    <span v-else-if=\"data.service_id\" class=\"text-muted\">Service #{{ data.service_id }}</span>\n                    <span v-else class=\"text-muted\">Aucun service</span>\n                </template>\n\n                <template #deleted_at=\"{ data }\">\n                    <td class=\"px-6 py-4 text-sm font-medium text-right whitespace-nowrap space-x-2\">\n                        <span class=\"badge bg-warning text-dark\">{{ formatDate(data.deleted_at) }}</span>\n                        <button @click.stop=\"restoreDocument(data)\" :disabled=\"isRowLoading(data)\" class=\"btn btn-sm btn-outline-primary\">\n                            <i class=\"pi pi-replay me-1\"></i> Restaurer\n                        </button>\n                    </td>\n                </template>\n            </AsdecodeTable>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue';\nimport ShowDocument from '../Document/ShowDocument.vue';\nimport FileIcon from '@/components/FileIcon.vue';\nimport { eventBus, EVENTS } from '@/services/eventBus';\n\nexport default defineComponent({\n    name: 'CorbeilleView',\n    components: {\n        FileIcon\n    },\n    data() {\n        return {\n            showDebug: false,\n            tableUrl: '/api/documents/trash',\n            tableKey: 0,\n            loadingMap: {}, // Pour suivre l'état de chargement par ligne\n            columns: [\n                {\n                    key: 'nom',\n                    label: 'Fichier',\n                    headerClass: 'text-start',\n                    cellClass: 'text-start align-middle'\n                },\n                {\n                    key: 'type_lisible',\n                    label: 'Type',\n                    headerClass: 'text-center',\n                    cellClass: 'text-center align-middle'\n                },\n                {\n                    key: 'service',\n                    label: 'Service',\n                    headerClass: 'text-center',\n                    cellClass: 'text-center align-middle'\n                },\n                {\n                    key: 'deleted_at',\n                    label: 'Supprimé le',\n                    headerClass: 'text-center',\n                    cellClass: 'text-center align-middle'\n                }\n            ],\n        };\n    },\n    methods: {\n        async restoreDocument(document) {\n            if (this.isRowLoading(document)) return;\n\n            this.setRowLoading(document.uuid, true);\n            try {\n                await this.axios.post(`/api/documents/${document.uuid}/restore`);\n                this.$toast.add({ severity: 'success', summary: 'Succès', detail: 'Document restauré avec succès.', life: 3000 });\n                eventBus.emit(EVENTS.DOCUMENT_RESTORED, document.uuid);\n            } catch (error) {\n                console.error('Erreur détaillée lors de la restauration du document:', error.response || error);\n                this.$toast.add({ severity: 'error', summary: 'Erreur', detail: 'Erreur lors de la restauration du document.', life: 3000 });\n            } finally {\n                this.setRowLoading(document.uuid, false);\n            }\n        },\n\n        isRowLoading(document) {\n            return this.loadingMap[document.uuid] || false;\n        },\n\n        setRowLoading(uuid, isLoading) {\n            this.loadingMap[uuid] = isLoading;\n        },\n\n        refreshTable() {\n            this.tableKey++;\n        },\n        showLine(line) {\n            // Ouvrir le popup de détails avec les actions spécifiques à la corbeille\n            const extension = line.nom.split('.').pop().toLowerCase();\n            const isImage = ['png', 'jpg', 'jpeg', 'gif', 'webp'].includes(extension);\n            const dialogWidth = isImage ? '70vw' : '50vw';\n\n            this.$dialog.open(ShowDocument, {\n                props: {\n                    header: 'Document dans la corbeille',\n                    style: { width: dialogWidth },\n                    modal: true,\n                    maximizable: true,\n                    closeOnEscape: true\n                },\n                data: {\n                    document: line,\n                    source: 'trash', // Identifier que c'est depuis la corbeille\n                    table: 'trash'\n                }\n            });\n        },\n        formatDate(dateString) {\n            if (!dateString) return '';\n            return new Date(dateString).toLocaleDateString('fr-FR', {\n                year: 'numeric',\n                month: 'short',\n                day: 'numeric'\n            });\n        },\n        getFileType(fileName) {\n            if (!fileName) return 'Inconnu';\n            const extension = fileName.split('.').pop().toLowerCase();\n            const types = {\n                'png': 'Image PNG',\n                'jpg': 'Image JPG',\n                'jpeg': 'Image JPEG',\n                'gif': 'Image GIF',\n                'pdf': 'Document PDF',\n                'doc': 'Document Word',\n                'docx': 'Document Word',\n                'xls': 'Fichier Excel',\n                'xlsx': 'Fichier Excel',\n                'ppt': 'Présentation PowerPoint',\n                'pptx': 'Présentation PowerPoint',\n                'zip': 'Archive ZIP',\n                'rar': 'Archive RAR',\n                'txt': 'Fichier Texte',\n            };\n            return types[extension] || `Fichier ${extension.toUpperCase()}`;\n        },\n    },\n    mounted() {\n        // Écouter les événements de restauration et suppression définitive\n        this.unsubscribeRestore = eventBus.on(EVENTS.DOCUMENT_RESTORED, (uuid) => {\n            console.log('CorbeilleView: Document restauré avec UUID:', uuid);\n            this.refreshTable();\n        });\n        \n        this.unsubscribeForceDelete = eventBus.on(EVENTS.DOCUMENT_FORCE_DELETED, (uuid) => {\n            console.log('CorbeilleView: Document supprimé définitivement avec UUID:', uuid);\n            this.refreshTable();\n        });\n    },\n    unmounted() {\n        // Se désabonner des événements pour éviter les fuites de mémoire\n        if (this.unsubscribeRestore) {\n            this.unsubscribeRestore();\n        }\n        if (this.unsubscribeForceDelete) {\n            this.unsubscribeForceDelete();\n        }\n    }\n});\n</script>\n\n<style scoped>\n.file-cell {\n    display: flex;\n    align-items: center;\n}\n\n.header-actions {\n  margin-left: auto;\n}\n\n.document-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\n  gap: 1rem;\n  padding: 1.5rem;\n}\n\n.document-card {\n  border: 1px solid #dee2e6;\n  border-radius: 8px;\n  transition: box-shadow 0.2s, transform 0.2s;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n\n.document-card:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n.document-card-icon {\n  padding: 1.5rem 1rem;\n  text-align: center;\n  background-color: #f8f9fa;\n  cursor: pointer;\n}\n\n.document-card-body {\n  padding: 1rem;\n  background-color: #ffffff;\n  flex-grow: 1;\n}\n\n.document-card-name {\n  font-weight: 600;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  cursor: pointer;\n}\n\n.document-card-info {\n  font-size: 0.8rem;\n  color: #6c757d;\n  margin-top: 0.25rem;\n}\n\n.document-card-footer {\n  padding: 0.75rem;\n  border-top: 1px solid #dee2e6;\n  background-color: #f8f9fa;\n}\n\n.w-100 {\n  width: 100%;\n  grid-column: 1 / -1;\n}\n\n.card-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n.card-title {\n    font-size: 1.5rem;\n    font-weight: 600;\n    margin: 0;\n}\n</style>","import { render } from \"./CorbeilleView.vue?vue&type=template&id=25255e24&scoped=true\"\nimport script from \"./CorbeilleView.vue?vue&type=script&lang=js\"\nexport * from \"./CorbeilleView.vue?vue&type=script&lang=js\"\n\nimport \"./CorbeilleView.vue?vue&type=style&index=0&id=25255e24&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-25255e24\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"file-icon-container\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"file-extension\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: _normalizeClass(['file-icon', _ctx.iconClass])\n    }, [\n      (_ctx.fileExtension)\n        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, _toDisplayString(_ctx.fileExtension), 1))\n        : _createCommentVNode(\"\", true)\n    ], 2)\n  ]))\n}","<template>\n  <div class=\"file-icon-container\">\n    <div :class=\"['file-icon', iconClass]\">\n      <span v-if=\"fileExtension\" class=\"file-extension\">{{ fileExtension }}</span>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed } from 'vue';\n\nexport default defineComponent({\n  name: 'FileIcon',\n  props: {\n    fileName: {\n      type: String,\n      required: true\n    },\n    fileType: {\n      type: String,\n      default: ''\n    }\n  },\n  setup(props) {\n    const getFileExtension = (fileName: string) => {\n      const parts = fileName.split('.');\n      if (parts.length > 1) {\n        return parts[parts.length - 1].toLowerCase();\n      }\n      return '';\n    };\n\n    const fileExtension = computed(() => {\n      const type = props.fileType.toLowerCase();\n      \n      // Pour les types spécifiques, on n'affiche pas l'extension\n      if (type.includes('pdf') || type.includes('word') || \n          type.includes('excel') || type.includes('powerpoint') ||\n          type.includes('image')) {\n        return '';\n      }\n      \n      // Pour les autres types, on affiche l'extension\n      const ext = getFileExtension(props.fileName);\n      if (ext && ext.length <= 4) {\n        return ext;\n      }\n      return '';\n    });\n\n    const iconClass = computed(() => {\n      const fileName = props.fileName.toLowerCase();\n      const type = props.fileType.toLowerCase();\n      const ext = getFileExtension(fileName);\n\n      // Déterminer la classe d'icône en fonction du type de fichier\n      if (type.includes('image') || ['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(ext)) {\n        return 'image-icon';\n      } else if (type.includes('pdf') || ext === 'pdf') {\n        return 'pdf-icon';\n      } else if (type.includes('word') || ['doc', 'docx'].includes(ext)) {\n        return 'word-icon';\n      } else if (type.includes('excel') || ['xls', 'xlsx', 'csv'].includes(ext)) {\n        return 'excel-icon';\n      } else if (type.includes('powerpoint') || ['ppt', 'pptx'].includes(ext)) {\n        return 'powerpoint-icon';\n      } else if (type.includes('zip') || ['zip', 'rar', '7z'].includes(ext)) {\n        return 'zip-icon';\n      } else if (type.includes('folder') || type.includes('directory')) {\n        return 'folder-icon';\n      } else if (type.includes('text') || ['txt', 'md'].includes(ext)) {\n        return 'text-icon';\n      } else {\n        return 'generic-icon';\n      }\n    });\n\n    return {\n      iconClass,\n      fileExtension\n    };\n  }\n});\n</script>\n\n<style scoped>\n.file-icon-container {\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 8px;\n}\n\n.file-icon {\n  width: 24px;\n  height: 24px;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  font-size: 10px;\n  font-weight: bold;\n  color: white;\n}\n\n.file-extension {\n  text-transform: uppercase;\n  font-size: 8px;\n}\n\n/* Styles spécifiques pour chaque type de fichier */\n.image-icon {\n  background-color: #dd4b39;\n  background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\"><path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5-7l-3 3.72L9 13l-3 4h12l-4-5z\"/></svg>');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 16px;\n}\n\n.pdf-icon {\n  background-color: #dd4b39;\n  position: relative;\n}\n\n.pdf-icon::before {\n  content: \"PDF\";\n  color: white;\n  font-size: 8px;\n  font-weight: bold;\n}\n\n.word-icon {\n  background-color: #4285f4;\n  position: relative;\n}\n\n.word-icon::before {\n  content: \"W\";\n  color: white;\n  font-weight: bold;\n}\n\n.excel-icon {\n  background-color: #0f9d58;\n  position: relative;\n}\n\n.excel-icon::before {\n  content: \"X\";\n  color: white;\n  font-weight: bold;\n}\n\n.powerpoint-icon {\n  background-color: #f4b400;\n  position: relative;\n}\n\n.powerpoint-icon::before {\n  content: \"P\";\n  color: white;\n  font-weight: bold;\n}\n\n.folder-icon {\n  background-color: #f1c40f;\n  background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\"><path d=\"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\"/></svg>');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 16px;\n}\n\n.zip-icon {\n  background-color: #f4b400;\n  position: relative;\n}\n\n.zip-icon::before {\n  content: \"ZIP\";\n  color: white;\n  font-size: 7px;\n  font-weight: bold;\n}\n\n.text-icon {\n  background-color: #607d8b;\n}\n\n.generic-icon {\n  background-color: #9e9e9e;\n  position: relative;\n}\n\n.generic-icon::before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\"><path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"/></svg>');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 16px;\n}\n</style>\n","import { render } from \"./FileIcon.vue?vue&type=template&id=febcd1ec&scoped=true&ts=true\"\nimport script from \"./FileIcon.vue?vue&type=script&lang=ts\"\nexport * from \"./FileIcon.vue?vue&type=script&lang=ts\"\n\nimport \"./FileIcon.vue?vue&type=style&index=0&id=febcd1ec&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-febcd1ec\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","$event","_ctx","showDebug","_hoisted_3","_hoisted_4","_toDisplayString","tableUrl","_hoisted_5","_createBlock","_component_AsdecodeTable","ref","key","tableKey","columns","url","table","searchable","onRowClick","showLine","nom","_withCtx","data","_hoisted_6","_createVNode","_component_FileIcon","fileName","_hoisted_7","type_lisible","_hoisted_8","getFileType","service","_hoisted_9","service_id","_hoisted_10","_hoisted_11","deleted_at","_hoisted_12","_hoisted_13","formatDate","_withModifiers","restoreDocument","disabled","isRowLoading","defineComponent","name","components","FileIcon","loadingMap","label","headerClass","cellClass","methods","document","this","setRowLoading","uuid","axios","post","$toast","add","severity","summary","detail","life","eventBus","emit","EVENTS","DOCUMENT_RESTORED","error","console","response","isLoading","refreshTable","line","extension","split","pop","toLowerCase","isImage","includes","dialogWidth","$dialog","open","ShowDocument","props","header","style","width","modal","maximizable","closeOnEscape","source","dateString","Date","toLocaleDateString","year","month","day","types","toUpperCase","mounted","unsubscribeRestore","on","log","unsubscribeForceDelete","DOCUMENT_FORCE_DELETED","unmounted","__exports__","render","$props","$setup","$data","$options","_openBlock","_normalizeClass","iconClass","fileExtension","_createCommentVNode","type","String","required","fileType","default","setup","getFileExtension","parts","length","computed","ext"],"sourceRoot":""}