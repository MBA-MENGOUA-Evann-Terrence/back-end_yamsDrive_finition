{"version":3,"file":"js/761.e770d0ba.js","mappings":"qQACOA,MAAM,2B,GAEJA,MAAM,e,GAEJA,MAAM,kB,GAYRA,MAAM,iC,GACJA,MAAM,a,GAENA,MAAM,oB,GACNA,MAAM,mB,GACFA,MAAM,qB,iBAaAA,MAAM,a,GAEHA,MAAM,Q,GAIRA,MAAM,sB,mBAK0BA,MAAM,c,SAC/BA,MAAM,c,GAGbA,MAAM,4B,iFAjD1BC,EAAAA,EAAAA,IA8DM,MA9DNC,EA8DM,EA5DJC,EAAAA,EAAAA,IAWM,MAXNC,EAWM,C,aAVJD,EAAAA,EAAAA,IAAiD,MAA7CH,MAAM,cAAa,yBAAqB,KAC5CG,EAAAA,EAAAA,IAQM,MARNE,EAQM,CAP6DC,EAAAC,mB,WAAjEN,EAAAA,EAAAA,IAES,U,MAFDD,MAAM,uBAAwBQ,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEJ,EAAAK,cAAAL,EAAAK,gBAAAD,K,cAC3CP,EAAAA,EAAAA,IAAiC,KAA9BH,MAAM,qBAAmB,U,QAAK,+BACnC,Q,gBACAG,EAAAA,EAAAA,IAES,UAFDH,MAAM,kBAAmBQ,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEJ,EAAAM,iBAAAN,EAAAM,mBAAAF,K,cACtCP,EAAAA,EAAAA,IAAgC,KAA7BH,MAAM,oBAAkB,U,QAAK,sBAClC,OACAG,EAAAA,EAAAA,IAAqF,UAA7EU,GAAG,mBAAoBL,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEJ,EAAAQ,aAAAR,EAAAQ,eAAAJ,IAAaV,MAAM,UAAS,mBAKtEG,EAAAA,EAAAA,IA6CM,MA7CNY,EA6CM,EA5CJZ,EAAAA,EAAAA,IA2CM,MA3CNa,EA2CM,EAzCNb,EAAAA,EAAAA,IAwCM,MAxCNc,EAwCM,EAvCJd,EAAAA,EAAAA,IAA6E,IAA7Ee,EAA2B,4BAAwBC,EAAAA,EAAAA,IAAGb,EAAAc,UAAUC,QAAM,IACtElB,EAAAA,EAAAA,IAqCQ,QArCRmB,EAqCQ,C,aApCNnB,EAAAA,EAAAA,IAQQ,SARDH,MAAM,eAAa,EACxBG,EAAAA,EAAAA,IAMK,YALHA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAa,UAAT,SACJA,EAAAA,EAAAA,IAAe,UAAX,WACJA,EAAAA,EAAAA,IAAgB,UAAZ,YACJA,EAAAA,EAAAA,IAAkB,UAAd,iB,KAGRA,EAAAA,EAAAA,IA0BQ,gB,aAzBNF,EAAAA,EAAAA,IAmBKsB,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAnBkBlB,EAAAc,UAAZK,K,WAAXxB,EAAAA,EAAAA,IAmBK,MAnB8ByB,IAAKD,EAASZ,GAAKL,QAAKmB,GAAErB,EAAAsB,SAASH,GAAWI,MAAA,oB,EAC/E1B,EAAAA,EAAAA,IAKK,YAJHA,EAAAA,EAAAA,IAGM,MAHN2B,EAGM,EAFJC,EAAAA,EAAAA,IAAqCC,EAAA,CAA1BC,SAAUR,EAASS,K,sBAC9B/B,EAAAA,EAAAA,IAA4C,OAA5CgC,GAA4ChB,EAAAA,EAAAA,IAAtBM,EAASS,KAAG,QAGtC/B,EAAAA,EAAAA,IAEK,YADHA,EAAAA,EAAAA,IAAuE,OAAvEiC,GAAuEjB,EAAAA,EAAAA,IAAnCb,EAAA+B,YAAYZ,EAASS,MAAG,MAE9D/B,EAAAA,EAAAA,IAA0C,WAAAgB,EAAAA,EAAAA,IAAnCb,EAAAgC,WAAWb,EAASc,SAAM,IACjCpC,EAAAA,EAAAA,IAIK,WAHSsB,EAASe,U,WAArBvC,EAAAA,EAAAA,IAA+D,OAAAwC,GAAAtB,EAAAA,EAAAA,IAA9BM,EAASe,QAAQN,KAAG,IACpCT,EAASiB,a,WAA1BzC,EAAAA,EAAAA,IAAkG,OAAlG0C,EAAyD,aAASxB,EAAAA,EAAAA,IAAGM,EAASiB,YAAU,M,WACxFzC,EAAAA,EAAAA,IAAoD,OAApD2C,EAAgC,qBAElCzC,EAAAA,EAAAA,IAEK,YADHA,EAAAA,EAAAA,IAAsG,OAAtG0C,GAAsG1B,EAAAA,EAAAA,IAAA,IAAxD2B,KAAKrB,EAASsB,YAAYC,sBAAkB,M,aAG/D,IAArB1C,EAAAc,UAAUC,S,WAApBpB,EAAAA,EAAAA,IAIK,KAAAgD,EAAAxC,EAAA,KAAAA,EAAA,KAHHN,EAAAA,EAAAA,IAEK,MAFD+C,QAAQ,IAAIlD,MAAM,+BAA8B,2BAEpD,Q,wGAiEZ,GAAemD,EAAAA,EAAAA,IAAgB,CAC3BC,KAAM,gBACNC,WAAY,CACRC,SAAQA,EAAAA,GAEZC,IAAAA,GACI,MAAO,CACHC,UAAWA,EAAAA,EACbpC,UAAW,GACXqC,aAAc,GACdC,QAAS,CAAC,EACVC,MAAO,EACLC,UAAW,GACXC,QAAS,CACL,CACInC,IAAK,MACLoC,MAAO,WAEX,CACIpC,IAAK,eACLoC,MAAO,QAEX,CACIpC,IAAK,SACLoC,MAAO,UAEX,CACIpC,IAAK,UACLoC,MAAO,WAEX,CACIpC,IAAK,aACLoC,MAAO,cAIvB,EACAC,SAAU,CACNxD,gBAAAA,GACI,OAAOyD,KAAKN,UAAYM,KAAKN,QAAQO,MAAQD,KAAKN,QAAQQ,QAAUF,KAAKN,QAAQlB,QACrF,GAEJ2B,QAAS,CACLxD,YAAAA,GACIyD,QAAQC,IAAI,mCACZL,KAAKN,QAAU,CAAC,EAChBY,aAAaC,WAAW,iBACxBP,KAAK5C,UAAY,IAAI4C,KAAKP,cAC1BW,QAAQC,IAAI,iCAAkCL,KAAK5C,UAAUC,QAG7DmD,OAAOC,cAAc,IAAIC,YAAY,wBAAyB,CAC1DC,OAAQ,CAAC,IAEjB,EAEF,oBAAMC,GACF,IACIR,QAAQC,IAAI,4BAEZ,MAAMQ,QAAiBb,KAAKR,UAAUsB,IAAI,4BAC1CV,QAAQC,IAAI,qBAAsBQ,EAAStB,MAC3Ca,QAAQC,IAAI,mCAAoCQ,EAAStB,MACzDa,QAAQC,IAAI,gCAAiCQ,EAAStB,MAAMA,MAE5D,IAAIwB,EAAO,GAGPF,EAAStB,MAAQyB,MAAMC,QAAQJ,EAAStB,KAAKA,OAE7CwB,EAAOF,EAAStB,KAAKA,KACrBa,QAAQC,IAAI,mCAAoCU,EAAK1D,OAAQ,aACtD2D,MAAMC,QAAQJ,EAAStB,OAE9BwB,EAAOF,EAAStB,KAChBa,QAAQC,IAAI,gCAAiCU,EAAK1D,OAAQ,cAE1D+C,QAAQc,MAAM,2BAA4BL,EAAStB,MACnDwB,EAAO,IAGXX,QAAQC,IAAI,kCAAmCU,EAAK1D,QACpD2C,KAAKP,aAAesB,EACpBf,KAAK5C,UAAY2D,EAEjBX,QAAQC,IAAI,+BAAgCL,KAAK5C,UAAUC,QAC3D+C,QAAQC,IAAI,qBAAsBL,KAAKN,SAGnCyB,OAAOC,KAAKpB,KAAKN,SAAS2B,KAAK3D,GAAOsC,KAAKN,QAAQhC,KACnD0C,QAAQC,IAAI,iCACZL,KAAKsB,aAAatB,KAAKN,SACvBU,QAAQC,IAAI,+BAAgCL,KAAK5C,UAAUC,SAE3D+C,QAAQC,IAAI,wBAIhBL,KAAKuB,UAAU,KACXnB,QAAQC,IAAI,kCACZL,KAAKwB,gBAGb,CAAE,MAAON,GACLd,QAAQc,MAAM,kDAAmDA,GACjElB,KAAK5C,UAAY,GACjB4C,KAAKP,aAAe,EACxB,CACJ,EAEA,iBAAM3C,GACFsD,QAAQC,IAAI,2CACNL,KAAKY,gBACf,EACAhD,QAAAA,CAAS6D,GACH,MAAMC,EAAYD,EAAKvD,IAAIyD,MAAM,KAAKC,MAAMC,cACtCC,EAAU,CAAC,MAAO,MAAO,OAAQ,MAAO,QAAQC,SAASL,GACzDM,EAAcF,EAAU,OAAS,OAEvC9B,KAAKiC,QAAQC,KAAKC,EAAAA,EAAc,CAC5BC,MAAO,CACHC,OAAQ,sBACRxE,MAAO,CAAEyE,MAAON,GAChBO,OAAO,EACPC,aAAa,EACbC,eAAe,GAEnBlD,KAAM,CACF9B,SAAUgE,IAGtB,EACAiB,WAAAA,CAAYC,GACR3C,KAAKL,MAAQgD,CACjB,EAEAC,YAAAA,CAAahD,GACTI,KAAKJ,UAAYA,CACrB,EACAhD,eAAAA,GACIoD,KAAKiC,QAAQC,KAAKW,EAAAA,EAAc,CAC5BT,MAAO,CACHC,OAAQ,sBACRxE,MAAO,CAAEyE,MAAO,QAChBC,OAAO,GAEXO,QAASA,KAEL1C,QAAQC,IAAI,iDACZ0C,WAAW,KACP/C,KAAKY,kBACN,OAGf,EAEAoC,YAAAA,GACI5C,QAAQC,IAAI,mDACZL,KAAKY,gBACT,EAEAU,YAAAA,CAAa5B,GACTU,QAAQC,IAAI,2CAA4CX,GAGxD,MAAMnD,EAAmBmD,IAAYA,EAAQO,MAAQP,EAAQQ,QAAUR,EAAQlB,SAC1EjC,GAKLyD,KAAK5C,UAAY4C,KAAKP,aAAawD,OAAOC,IACtC,GAAIxD,EAAQO,KAAM,CACd,MAAMkD,EAAUnD,KAAKoD,gBAAgBF,EAAIhF,KACzC,GAAIiF,IAAYzD,EAAQO,KAAM,OAAO,CACzC,CACA,QAAIP,EAAQQ,QACJgD,EAAIG,UAAY3D,EAAQQ,WAE5BR,EAAQlB,SACJ0E,EAAIxE,aAAegB,EAAQlB,WAIvC4B,QAAQC,IAAI,KAAKL,KAAK5C,UAAUC,sCAjB5B2C,KAAK5C,UAAY,IAAI4C,KAAKP,aAkBlC,EAEA2D,eAAAA,CAAgBE,GACZ,IAAKA,EAAU,MAAO,QAEtB,MAAMC,EAAMD,EAAS3B,MAAM,KAAKC,MAAMC,cAEtC,MAAY,QAAR0B,EAAsB,MACtB,CAAC,MAAO,OAAQ,MAAO,MAAO,OAAQ,MAAO,OAAOxB,SAASwB,GAAa,QAC1E,CAAC,MAAO,QAAQxB,SAASwB,GAAa,OACtC,CAAC,MAAO,QAAQxB,SAASwB,GAAa,QACtC,CAAC,MAAO,QAAQxB,SAASwB,GAAa,aACtC,CAAC,MAAO,MAAO,KAAM,MAAO,MAAMxB,SAASwB,GAAa,UAChD,QAARA,EAAsB,OAEnB,OACX,EAEAjF,UAAAA,CAAWkF,GACP,IAAKA,EAAO,MAAO,UACnB,GAAc,IAAVA,EAAa,MAAO,UACxB,MAAMC,EAAI,KACJC,EAAQ,CAAC,QAAS,KAAM,KAAM,KAAM,MACpCC,EAAIC,KAAKC,MAAMD,KAAKvD,IAAImD,GAASI,KAAKvD,IAAIoD,IAChD,OAAOK,YAAYN,EAAQI,KAAKG,IAAIN,EAAGE,IAAIK,QAAQ,IAAM,IAAMN,EAAMC,EACzE,EACAtF,WAAAA,CAAYJ,GACR,IAAKA,EAAU,MAAO,UACtB,MAAMyD,EAAYzD,EAAS0D,MAAM,KAAKC,MAAMC,cACtCoC,EAAQ,CACV,IAAO,YACP,IAAO,YACP,KAAQ,aACR,IAAO,YACP,IAAO,eACP,IAAO,gBACP,KAAQ,gBACR,IAAO,gBACP,KAAQ,gBACR,IAAO,0BACP,KAAQ,0BACR,IAAO,cACP,IAAO,cACP,IAAO,iBAEX,OAAOA,EAAMvC,IAAc,WAAWA,EAAUwC,eACpD,EACAC,yBAAAA,CAA0BC,GACtB,MAAM1E,EAAU0E,EAAMzD,OACtBP,QAAQC,IAAI,+CAAgDX,GAC5DM,KAAKN,QAAUA,EACfM,KAAKsB,aAAa5B,EACtB,GAGJ2E,OAAAA,GACIrE,KAAKY,iBAGLR,QAAQC,IAAI,wDACZiE,EAAAA,EAASC,GAAGC,EAAAA,EAAOC,iBAAkB,KACjCrE,QAAQC,IAAI,qDACZL,KAAKY,mBAET0D,EAAAA,EAASC,GAAGC,EAAAA,EAAOE,iBAAkB,KACjCtE,QAAQC,IAAI,qDACZL,KAAKY,mBAET0D,EAAAA,EAASC,GAAGC,EAAAA,EAAOG,iBAAkB,KACjCvE,QAAQC,IAAI,qDACZL,KAAKY,mBAITJ,OAAOoE,iBAAiB,wBAAyB5E,KAAKmE,2BAGtD,IACI,MAAMU,EAAevE,aAAawE,QAAQ,iBACtCD,IACA7E,KAAKN,QAAUqF,KAAKC,MAAMH,GAElC,CAAE,MAAO3D,GACLd,QAAQc,MAAM,8CAA+CA,EACjE,CACJ,EACA+D,aAAAA,GACIX,EAAAA,EAASY,IAAIV,EAAAA,EAAOC,iBAAkBzE,KAAKY,gBAC3C0D,EAAAA,EAASY,IAAIV,EAAAA,EAAOE,iBAAkB1E,KAAKY,gBAC3C0D,EAAAA,EAASY,IAAIV,EAAAA,EAAOG,iBAAkB3E,KAAKY,gBAC3CJ,OAAO2E,oBAAoB,wBAAyBnF,KAAKmE,0BAC7D,EACAiB,SAAAA,GAEQpF,KAAKqF,aACLrF,KAAKqF,aAEb,I,UC5YN,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O,+ECPA,MAAMrJ,EAAa,CCDZF,MAAM,uBDEPI,EAAa,CACjBsB,IAAK,ECD0B1B,MAAM,kBDKjC,SAAUuJ,EAAOjJ,EAAUG,EAAY+I,EAAYC,EAAYC,EAAWC,GAC9E,OAAQC,EAAAA,EAAAA,OCRR3J,EAAAA,EAAAA,IAIM,MAJNC,EAIM,EAHJC,EAAAA,EAAAA,IAEM,OAFAH,OAAK6J,EAAAA,EAAAA,IAAA,aAAgBvJ,EAAAwJ,aDUxB,CCTWxJ,EAAAyJ,gBDWPH,EAAAA,EAAAA,OCXL3J,EAAAA,EAAAA,IAA4E,OAA5EG,GAA4Ee,EAAAA,EAAAA,IAAvBb,EAAAyJ,eAAa,KDY9DC,EAAAA,EAAAA,IAAoB,IAAI,IAC3B,IAEP,CCPA,OAAe7G,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,WACNgD,MAAO,CACLnE,SAAU,CACRgC,KAAMgG,OACNC,UAAU,GAEZC,SAAU,CACRlG,KAAMgG,OACNG,QAAS,KAGbC,KAAAA,CAAMjE,GACJ,MAAMkE,EAAoBrI,IACxB,MAAMsI,EAAQtI,EAAS0D,MAAM,KAC7B,OAAI4E,EAAMlJ,OAAS,EACVkJ,EAAMA,EAAMlJ,OAAS,GAAGwE,cAE1B,IAGHkE,GAAgBhG,EAAAA,EAAAA,IAAS,KAC7B,MAAME,EAAOmC,EAAM+D,SAAStE,cAG5B,GAAI5B,EAAK8B,SAAS,QAAU9B,EAAK8B,SAAS,SACtC9B,EAAK8B,SAAS,UAAY9B,EAAK8B,SAAS,eACxC9B,EAAK8B,SAAS,SAChB,MAAO,GAIT,MAAMwB,EAAM+C,EAAiBlE,EAAMnE,UACnC,OAAIsF,GAAOA,EAAIlG,QAAU,EAChBkG,EAEF,KAGHuC,GAAY/F,EAAAA,EAAAA,IAAS,KACzB,MAAM9B,EAAWmE,EAAMnE,SAAS4D,cAC1B5B,EAAOmC,EAAM+D,SAAStE,cACtB0B,EAAM+C,EAAiBrI,GAG7B,OAAIgC,EAAK8B,SAAS,UAAY,CAAC,MAAO,OAAQ,MAAO,MAAO,QAAQA,SAASwB,GACpE,aACEtD,EAAK8B,SAAS,QAAkB,QAARwB,EAC1B,WACEtD,EAAK8B,SAAS,SAAW,CAAC,MAAO,QAAQA,SAASwB,GACpD,YACEtD,EAAK8B,SAAS,UAAY,CAAC,MAAO,OAAQ,OAAOA,SAASwB,GAC5D,aACEtD,EAAK8B,SAAS,eAAiB,CAAC,MAAO,QAAQA,SAASwB,GAC1D,kBACEtD,EAAK8B,SAAS,QAAU,CAAC,MAAO,MAAO,MAAMA,SAASwB,GACxD,WACEtD,EAAK8B,SAAS,WAAa9B,EAAK8B,SAAS,aAC3C,cACE9B,EAAK8B,SAAS,SAAW,CAAC,MAAO,MAAMA,SAASwB,GAClD,YAEA,iBAIX,MAAO,CACLuC,YACAC,gBAEJ,I,UC1EF,MAAMT,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/views/dashboard/Document/DocumentsView.vue","webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/views/dashboard/Document/DocumentsView.vue?1ad1","webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/components/FileIcon.vue?e138","webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/components/FileIcon.vue","webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/components/FileIcon.vue?d8de"],"sourcesContent":["<template>\n  <div class=\"document-view-container\">\n    <!-- Titre ind√©pendant avec actions -->\n    <div class=\"view-header\">\n      <h1 class=\"view-title\">Gestion des Documents</h1>\n      <div class=\"header-actions\">\n        <button class=\"btn btn-warning me-2\" @click=\"clearFilters\" v-if=\"hasActiveFilters\">\n          <i class=\"fas fa-times me-1\"></i> R√©initialiser les filtres\n        </button>\n        <button class=\"btn btn-primary\" @click=\"showCreateModal\">\n          <i class=\"fas fa-plus me-1\"></i> Nouveau Document\n        </button>\n        <button id=\"refreshdocuments\" @click=\"refreshData\" class=\"d-none\">Rafra√Æchir</button>\n      </div>\n    </div>\n    \n    <!-- Card contenant uniquement le contenu -->\n    <div class=\"card document-management-card\">\n      <div class=\"card-body\">\n      <!-- Tableau HTML simple qui fonctionne -->\n      <div class=\"table-responsive\">\n        <p class=\"text-muted mb-2\">üìä Nombre de documents: {{ documents.length }}</p>\n        <table class=\"table table-hover\">\n          <thead class=\"table-light\">\n            <tr>\n              <th>Fichier</th>\n              <th>Type</th>\n              <th>Taille</th>\n              <th>Service</th>\n              <th>Ajout√© le</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"document in documents\" :key=\"document.id\" @click=\"showLine(document)\" style=\"cursor: pointer;\">\n              <td>\n                <div class=\"file-cell\">\n                  <FileIcon :fileName=\"document.nom\" />\n                  <span class=\"ms-2\">{{ document.nom }}</span>\n                </div>\n              </td>\n              <td>\n                <span class=\"badge bg-secondary\">{{ getFileType(document.nom) }}</span>\n              </td>\n              <td>{{ formatSize(document.taille) }}</td>\n              <td>\n                <span v-if=\"document.service\">{{ document.service.nom }}</span>\n                <span v-else-if=\"document.service_id\" class=\"text-muted\">Service #{{ document.service_id }}</span>\n                <span v-else class=\"text-muted\">Aucun service</span>\n              </td>\n              <td>\n                <span class=\"badge bg-light text-dark\">{{ new Date(document.created_at).toLocaleDateString() }}</span>\n              </td>\n            </tr>\n            <tr v-if=\"documents.length === 0\">\n              <td colspan=\"6\" class=\"text-center text-muted py-4\">\n                Aucun document trouv√©\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      </div>\n    </div>\n  </div>\n</template>\n  \n  <style scoped>\n  .document-view-container {\n    padding: 0;\n  }\n\n  .view-header {\n    margin-bottom: 24px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  .view-title {\n    font-size: 2rem;\n    font-weight: 700;\n    color: #202124;\n    margin: 0;\n  }\n\n  .header-actions {\n    display: flex;\n    gap: 12px;\n    align-items: center;\n  }\n\n  .document-management-card {\n    border-radius: 8px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n    border: none;\n  }\n  \n  .card-body {\n    padding: 1.5rem;\n  }\n  \n  /* Masquer les informations de pagination (haut et bas) */\n  :deep(.dataTables_length), \n  :deep(.dataTables_info) {\n    display: none !important;\n  }\n\n  .file-cell {\n    display: flex;\n    align-items: center;\n  }\n  </style>\n  \n  <script>\n  import { defineComponent } from 'vue';\n  import FormDocument from './FormDocument.vue';\n  import ShowDocument from './ShowDocument.vue';\n  import FileIcon from '@/components/FileIcon.vue';\n  import apiClient from '@/services/api';\n  import { eventBus, EVENTS } from '@/services/eventBus';\n\n  export default defineComponent({\n      name: 'DocumentsView',\n      components: {\n          FileIcon\n      },\n      data() {\n          return {\n              apiClient: apiClient,\n            documents: [],\n            allDocuments: [],\n            filters: {},\n            lines: 0,\n              selection: [],\n              columns: [\n                  {\n                      key: 'nom',\n                      label: 'Fichier',\n                  },\n                  {\n                      key: 'type_lisible',\n                      label: 'Type',\n                  },\n                  {\n                      key: 'taille',\n                      label: 'Taille',\n                  },\n                  {\n                      key: 'service',\n                      label: 'Service',\n                  },\n                  {\n                      key: 'created_at',\n                      label: 'Ajout√© le',\n                  }\n              ]\n          }\n      },\n      computed: {\n          hasActiveFilters() {\n              return this.filters && (this.filters.type || this.filters.person || this.filters.service);\n          }\n      },\n      methods: {\n          clearFilters() {\n              console.log('üßπ R√©initialisation des filtres');\n              this.filters = {};\n              localStorage.removeItem('globalFilters');\n              this.documents = [...this.allDocuments];\n              console.log('‚úÖ Tous les documents affich√©s:', this.documents.length);\n              \n              // √âmettre un √©v√©nement pour informer les autres composants\n              window.dispatchEvent(new CustomEvent('global-filters-change', { \n                  detail: {} \n              }));\n          },\n\n        async fetchDocuments() {\n            try {\n                console.log('üîÑ fetchDocuments: d√©but');\n                // Demander tous les documents sans pagination\n                const response = await this.apiClient.get('/documents?per_page=1000');\n                console.log('üì• Response re√ßue:', response.data);\n                console.log('üì• Type de response.data:', typeof response.data);\n                console.log('üì• response.data.data existe?', response.data?.data);\n                \n                let docs = [];\n                \n                // V√©rifier la structure exacte\n                if (response.data && Array.isArray(response.data.data)) {\n                    // Structure: { data: [...] }\n                    docs = response.data.data;\n                    console.log('‚úÖ Documents trouv√©s (data.data):', docs.length, '√©l√©ments');\n                } else if (Array.isArray(response.data)) {\n                    // Structure: [...]\n                    docs = response.data;\n                    console.log('‚úÖ Documents trouv√©s (racine):', docs.length, '√©l√©ments');\n                } else {\n                    console.error('‚ö†Ô∏è Structure inattendue:', response.data);\n                    docs = [];\n                }\n                \n                console.log('üìã Documents finaux √† afficher:', docs.length);\n                this.allDocuments = docs;\n                this.documents = docs;\n                \n                console.log('‚úÖ this.documents mis √† jour:', this.documents.length);\n                console.log('üîç Filtres actifs:', this.filters);\n                \n                // Appliquer les filtres si actifs\n                if (Object.keys(this.filters).some(key => this.filters[key])) {\n                    console.log('‚ö†Ô∏è Application des filtres...');\n                    this.applyFilters(this.filters);\n                    console.log('üìä Documents apr√®s filtrage:', this.documents.length);\n                } else {\n                    console.log('‚úÖ Aucun filtre actif');\n                }\n                \n                // Force le re-render\n                this.$nextTick(() => {\n                    console.log('üîÑ Force update apr√®s nextTick');\n                    this.$forceUpdate();\n                });\n                \n            } catch (error) {\n                console.error('‚ùå Erreur lors de la r√©cup√©ration des documents:', error);\n                this.documents = [];\n                this.allDocuments = [];\n            }\n        },\n\n        async refreshData() {\n            console.log('DocumentsView: refreshData appel√©');\n            await this.fetchDocuments();\n        },\n        showLine(line) {\n              const extension = line.nom.split('.').pop().toLowerCase();\n              const isImage = ['png', 'jpg', 'jpeg', 'gif', 'webp'].includes(extension);\n              const dialogWidth = isImage ? '70vw' : '50vw';\n\n              this.$dialog.open(ShowDocument, {\n                  props: {\n                      header: 'D√©tails du document',\n                      style: { width: dialogWidth },\n                      modal: true,\n                      maximizable: true,\n                      closeOnEscape: true\n                  },\n                  data: {\n                      document: line\n                  }\n              });\n          },\n          updateLines(nb) {\n              this.lines = nb;\n          },\n\n          getSelection(selection) {\n              this.selection = selection;\n          },\n          showCreateModal() {\n              this.$dialog.open(FormDocument, {\n                  props: {\n                      header: 'Ajouter un document',\n                      style: { width: '50vw' },\n                      modal: true,\n                  },\n                  onClose: () => {\n                      // Toujours rafra√Æchir apr√®s la fermeture du modal\n                      console.log('üîî Modal ferm√© - Rafra√Æchissement automatique');\n                      setTimeout(() => {\n                          this.fetchDocuments();\n                      }, 200);\n                  }\n              });\n          },\n\n          refreshTable() {\n              console.log('üîÑ Rafra√Æchissement du tableau des documents...');\n              this.fetchDocuments();\n          },\n          \n          applyFilters(filters) {\n              console.log('üîç Filtres appliqu√©s dans DocumentsView:', filters);\n              \n              // Si aucun filtre n'est actif, afficher tous les documents\n              const hasActiveFilters = filters && (filters.type || filters.person || filters.service);\n              if (!hasActiveFilters) {\n                  this.documents = [...this.allDocuments];\n                  return;\n              }\n              \n              this.documents = this.allDocuments.filter(doc => {\n                  if (filters.type) {\n                      const docType = this.getDocumentType(doc.nom);\n                      if (docType !== filters.type) return false;\n                  }\n                  if (filters.person) {\n                      if (doc.user_id !== filters.person) return false;\n                  }\n                  if (filters.service) {\n                      if (doc.service_id !== filters.service) return false;\n                  }\n                  return true;\n              });\n              console.log(`‚úÖ ${this.documents.length} document(s) apr√®s filtrage`);\n          },\n          \n          getDocumentType(filename) {\n              if (!filename) return 'other';\n              \n              const ext = filename.split('.').pop().toLowerCase();\n              \n              if (ext === 'pdf') return 'pdf';\n              if (['jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp', 'svg'].includes(ext)) return 'image';\n              if (['doc', 'docx'].includes(ext)) return 'word';\n              if (['xls', 'xlsx'].includes(ext)) return 'excel';\n              if (['ppt', 'pptx'].includes(ext)) return 'powerpoint';\n              if (['zip', 'rar', '7z', 'tar', 'gz'].includes(ext)) return 'archive';\n              if (ext === 'txt') return 'text';\n              \n              return 'other';\n          },\n          \n          formatSize(bytes) {\n              if (!bytes) return '0 Bytes';\n              if (bytes === 0) return '0 Bytes';\n              const k = 1024;\n              const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n              const i = Math.floor(Math.log(bytes) / Math.log(k));\n              return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n          },\n          getFileType(fileName) {\n              if (!fileName) return 'Inconnu';\n              const extension = fileName.split('.').pop().toLowerCase();\n              const types = {\n                  'png': 'Image PNG',\n                  'jpg': 'Image JPG',\n                  'jpeg': 'Image JPEG',\n                  'gif': 'Image GIF',\n                  'pdf': 'Document PDF',\n                  'doc': 'Document Word',\n                  'docx': 'Document Word',\n                  'xls': 'Fichier Excel',\n                  'xlsx': 'Fichier Excel',\n                  'ppt': 'Pr√©sentation PowerPoint',\n                  'pptx': 'Pr√©sentation PowerPoint',\n                  'zip': 'Archive ZIP',\n                  'rar': 'Archive RAR',\n                  'txt': 'Fichier Texte',\n              };\n              return types[extension] || `Fichier ${extension.toUpperCase()}`;\n          },\n          handleGlobalFiltersChange(event) {\n              const filters = event.detail;\n              console.log('üåç DocumentsView a re√ßu les filtres globaux:', filters);\n              this.filters = filters;\n              this.applyFilters(filters);\n          }\n      },\n      // Hooks de cycle de vie\n      mounted() {\n          this.fetchDocuments();\n          \n          // √âcouter l'√©v√©nement de rafra√Æchissement (couvre tous les cas d'ajout)\n          console.log('üëÇ DocumentsView: √âcoute des √©v√©nements de documents');\n          eventBus.on(EVENTS.DOCUMENT_CREATED, () => {\n              console.log('üì¢ DocumentsView: √âv√©nement DOCUMENT_CREATED re√ßu');\n              this.fetchDocuments();\n          });\n          eventBus.on(EVENTS.DOCUMENT_UPDATED, () => {\n              console.log('üì¢ DocumentsView: √âv√©nement DOCUMENT_UPDATED re√ßu');\n              this.fetchDocuments();\n          });\n          eventBus.on(EVENTS.DOCUMENT_DELETED, () => {\n              console.log('üì¢ DocumentsView: √âv√©nement DOCUMENT_DELETED re√ßu');\n              this.fetchDocuments();\n          });\n          \n          // √âcouter les changements de filtres globaux\n          window.addEventListener('global-filters-change', this.handleGlobalFiltersChange);\n          \n          // Restaurer les filtres sauvegard√©s\n          try {\n              const savedFilters = localStorage.getItem('globalFilters');\n              if (savedFilters) {\n                  this.filters = JSON.parse(savedFilters);\n              }\n          } catch (error) {\n              console.error('Erreur lors de la restauration des filtres:', error);\n          }\n      },\n      beforeUnmount() {\n          eventBus.off(EVENTS.DOCUMENT_CREATED, this.fetchDocuments);\n          eventBus.off(EVENTS.DOCUMENT_UPDATED, this.fetchDocuments);\n          eventBus.off(EVENTS.DOCUMENT_DELETED, this.fetchDocuments);\n          window.removeEventListener('global-filters-change', this.handleGlobalFiltersChange);\n      },\n      unmounted() {\n          // Se d√©sabonner de l'√©v√©nement pour √©viter les fuites de m√©moire\n          if (this.unsubscribe) {\n              this.unsubscribe();\n          }\n      },\n  });\n  </script>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","import { render } from \"./DocumentsView.vue?vue&type=template&id=dfef3f9e&scoped=true\"\nimport script from \"./DocumentsView.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentsView.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentsView.vue?vue&type=style&index=0&id=dfef3f9e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dfef3f9e\"]])\n\nexport default __exports__","import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"file-icon-container\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"file-extension\"\n}\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", {\n      class: _normalizeClass(['file-icon', _ctx.iconClass])\n    }, [\n      (_ctx.fileExtension)\n        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, _toDisplayString(_ctx.fileExtension), 1))\n        : _createCommentVNode(\"\", true)\n    ], 2)\n  ]))\n}","<template>\n  <div class=\"file-icon-container\">\n    <div :class=\"['file-icon', iconClass]\">\n      <span v-if=\"fileExtension\" class=\"file-extension\">{{ fileExtension }}</span>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed } from 'vue';\n\nexport default defineComponent({\n  name: 'FileIcon',\n  props: {\n    fileName: {\n      type: String,\n      required: true\n    },\n    fileType: {\n      type: String,\n      default: ''\n    }\n  },\n  setup(props) {\n    const getFileExtension = (fileName: string) => {\n      const parts = fileName.split('.');\n      if (parts.length > 1) {\n        return parts[parts.length - 1].toLowerCase();\n      }\n      return '';\n    };\n\n    const fileExtension = computed(() => {\n      const type = props.fileType.toLowerCase();\n      \n      // Pour les types sp√©cifiques, on n'affiche pas l'extension\n      if (type.includes('pdf') || type.includes('word') || \n          type.includes('excel') || type.includes('powerpoint') ||\n          type.includes('image')) {\n        return '';\n      }\n      \n      // Pour les autres types, on affiche l'extension\n      const ext = getFileExtension(props.fileName);\n      if (ext && ext.length <= 4) {\n        return ext;\n      }\n      return '';\n    });\n\n    const iconClass = computed(() => {\n      const fileName = props.fileName.toLowerCase();\n      const type = props.fileType.toLowerCase();\n      const ext = getFileExtension(fileName);\n\n      // D√©terminer la classe d'ic√¥ne en fonction du type de fichier\n      if (type.includes('image') || ['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(ext)) {\n        return 'image-icon';\n      } else if (type.includes('pdf') || ext === 'pdf') {\n        return 'pdf-icon';\n      } else if (type.includes('word') || ['doc', 'docx'].includes(ext)) {\n        return 'word-icon';\n      } else if (type.includes('excel') || ['xls', 'xlsx', 'csv'].includes(ext)) {\n        return 'excel-icon';\n      } else if (type.includes('powerpoint') || ['ppt', 'pptx'].includes(ext)) {\n        return 'powerpoint-icon';\n      } else if (type.includes('zip') || ['zip', 'rar', '7z'].includes(ext)) {\n        return 'zip-icon';\n      } else if (type.includes('folder') || type.includes('directory')) {\n        return 'folder-icon';\n      } else if (type.includes('text') || ['txt', 'md'].includes(ext)) {\n        return 'text-icon';\n      } else {\n        return 'generic-icon';\n      }\n    });\n\n    return {\n      iconClass,\n      fileExtension\n    };\n  }\n});\n</script>\n\n<style scoped>\n.file-icon-container {\n  display: inline-block;\n  vertical-align: middle;\n  margin-right: 8px;\n}\n\n.file-icon {\n  width: 24px;\n  height: 24px;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  font-size: 10px;\n  font-weight: bold;\n  color: white;\n}\n\n.file-extension {\n  text-transform: uppercase;\n  font-size: 8px;\n}\n\n/* Styles sp√©cifiques pour chaque type de fichier */\n.image-icon {\n  background-color: #dd4b39;\n  background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\"><path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5-7l-3 3.72L9 13l-3 4h12l-4-5z\"/></svg>');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 16px;\n}\n\n.pdf-icon {\n  background-color: #dd4b39;\n  position: relative;\n}\n\n.pdf-icon::before {\n  content: \"PDF\";\n  color: white;\n  font-size: 8px;\n  font-weight: bold;\n}\n\n.word-icon {\n  background-color: #4285f4;\n  position: relative;\n}\n\n.word-icon::before {\n  content: \"W\";\n  color: white;\n  font-weight: bold;\n}\n\n.excel-icon {\n  background-color: #0f9d58;\n  position: relative;\n}\n\n.excel-icon::before {\n  content: \"X\";\n  color: white;\n  font-weight: bold;\n}\n\n.powerpoint-icon {\n  background-color: #f4b400;\n  position: relative;\n}\n\n.powerpoint-icon::before {\n  content: \"P\";\n  color: white;\n  font-weight: bold;\n}\n\n.folder-icon {\n  background-color: #f1c40f;\n  background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\"><path d=\"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z\"/></svg>');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 16px;\n}\n\n.zip-icon {\n  background-color: #f4b400;\n  position: relative;\n}\n\n.zip-icon::before {\n  content: \"ZIP\";\n  color: white;\n  font-size: 7px;\n  font-weight: bold;\n}\n\n.text-icon {\n  background-color: #607d8b;\n}\n\n.generic-icon {\n  background-color: #9e9e9e;\n  position: relative;\n}\n\n.generic-icon::before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"white\"><path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\"/></svg>');\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 16px;\n}\n</style>\n","import { render } from \"./FileIcon.vue?vue&type=template&id=febcd1ec&scoped=true&ts=true\"\nimport script from \"./FileIcon.vue?vue&type=script&lang=ts\"\nexport * from \"./FileIcon.vue?vue&type=script&lang=ts\"\n\nimport \"./FileIcon.vue?vue&type=style&index=0&id=febcd1ec&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-febcd1ec\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_ctx","hasActiveFilters","onClick","_cache","args","clearFilters","showCreateModal","id","refreshData","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","documents","length","_hoisted_8","_Fragment","_renderList","document","key","$event","showLine","style","_hoisted_10","_createVNode","_component_FileIcon","fileName","nom","_hoisted_11","_hoisted_12","getFileType","formatSize","taille","service","_hoisted_13","service_id","_hoisted_14","_hoisted_15","_hoisted_16","Date","created_at","toLocaleDateString","_hoisted_17","colspan","defineComponent","name","components","FileIcon","data","apiClient","allDocuments","filters","lines","selection","columns","label","computed","this","type","person","methods","console","log","localStorage","removeItem","window","dispatchEvent","CustomEvent","detail","fetchDocuments","response","get","docs","Array","isArray","error","Object","keys","some","applyFilters","$nextTick","$forceUpdate","line","extension","split","pop","toLowerCase","isImage","includes","dialogWidth","$dialog","open","ShowDocument","props","header","width","modal","maximizable","closeOnEscape","updateLines","nb","getSelection","FormDocument","onClose","setTimeout","refreshTable","filter","doc","docType","getDocumentType","user_id","filename","ext","bytes","k","sizes","i","Math","floor","parseFloat","pow","toFixed","types","toUpperCase","handleGlobalFiltersChange","event","mounted","eventBus","on","EVENTS","DOCUMENT_CREATED","DOCUMENT_UPDATED","DOCUMENT_DELETED","addEventListener","savedFilters","getItem","JSON","parse","beforeUnmount","off","removeEventListener","unmounted","unsubscribe","__exports__","render","$props","$setup","$data","$options","_openBlock","_normalizeClass","iconClass","fileExtension","_createCommentVNode","String","required","fileType","default","setup","getFileExtension","parts"],"sourceRoot":""}