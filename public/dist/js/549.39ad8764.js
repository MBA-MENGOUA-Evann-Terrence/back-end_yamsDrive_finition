"use strict";(self["webpackChunkskeleton_spa_vue3_bootstrap5_primevue_pwa_ts"]=self["webpackChunkskeleton_spa_vue3_bootstrap5_primevue_pwa_ts"]||[]).push([[549],{2549:function(e,s,o){o.r(s),o.d(s,{default:function(){return C}});var a=o(6768);const t={class:"auth-form-container"};function r(e,s,o,r,n,i){const l=(0,a.g2)("login-form");return(0,a.uX)(),(0,a.CE)("div",t,[s[0]||(s[0]=(0,a.Lk)("h2",null,"Connectez-vous à votre compte",-1)),s[1]||(s[1]=(0,a.Lk)("p",{class:"auth-subtitle"},"Entrez vos identifiants pour accéder à votre espace",-1)),(0,a.bF)(l,{onLoginSubmitted:e.handleLogin},null,8,["onLoginSubmitted"])])}var n=o(4968),i=o(5130),l=o(4232);const d={key:0,class:"error-message"},u={class:"input-group"},p={class:"input-wrapper"},c={class:"input-group"},m={class:"input-wrapper"},g=["type"],h={class:"form-options"},L={class:"remember"},f=["disabled"],w={key:0,class:"loading-spinner"};function b(e,s,o,t,r,n){return(0,a.uX)(),(0,a.CE)("form",{onSubmit:s[4]||(s[4]=(0,i.D$)((...s)=>e.handleLogin&&e.handleLogin(...s),["prevent"])),class:"auth-form"},[e.errorMessage?((0,a.uX)(),(0,a.CE)("div",d,(0,l.v_)(e.errorMessage),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",u,[s[6]||(s[6]=(0,a.Lk)("label",{for:"loginEmail"},"Adresse Email",-1)),(0,a.Lk)("div",p,[s[5]||(s[5]=(0,a.Lk)("i",{class:"fas fa-envelope input-icon"},null,-1)),(0,a.bo)((0,a.Lk)("input",{type:"email",class:"input-field",id:"loginEmail","onUpdate:modelValue":s[0]||(s[0]=s=>e.loginForm.email=s),required:"",placeholder:"votre@email.com"},null,512),[[i.Jo,e.loginForm.email]])])]),(0,a.Lk)("div",c,[s[8]||(s[8]=(0,a.Lk)("label",{for:"loginPassword"},"Mot de passe",-1)),(0,a.Lk)("div",m,[s[7]||(s[7]=(0,a.Lk)("i",{class:"fas fa-lock input-icon"},null,-1)),(0,a.bo)((0,a.Lk)("input",{type:e.showPassword?"text":"password",class:"input-field password-field",id:"loginPassword","onUpdate:modelValue":s[1]||(s[1]=s=>e.loginForm.password=s),required:"",placeholder:"••••••••"},null,8,g),[[i.hp,e.loginForm.password]]),(0,a.Lk)("i",{class:(0,l.C4)(["fas",e.showPassword?"fa-eye-slash":"fa-eye","password-toggle"]),onClick:s[2]||(s[2]=(...s)=>e.togglePassword&&e.togglePassword(...s))},null,2)])]),(0,a.Lk)("div",h,[(0,a.Lk)("label",L,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=s=>e.rememberMe=s)},null,512),[[i.lH,e.rememberMe]]),s[9]||(s[9]=(0,a.Lk)("span",null,"Se souvenir de moi",-1))]),s[10]||(s[10]=(0,a.Lk)("a",{href:"#",class:"forgot-password"},"Mot de passe oublié ?",-1))]),(0,a.Lk)("button",{type:"submit",class:"btn-auth btn-login",disabled:e.isLoading},[e.isLoading?((0,a.uX)(),(0,a.CE)("span",w)):(0,a.Q3)("",!0),(0,a.eW)(" "+(0,l.v_)(e.isLoading?"Connexion en cours...":"Se connecter"),1)],8,f)],32)}var v=o(4373),k=(0,a.pM)({name:"LoginForm",data(){return{loginForm:{email:"",password:""},errorMessage:"",isLoading:!1,showPassword:!1,rememberMe:!1}},methods:{togglePassword(){this.showPassword=!this.showPassword},async handleLogin(){this.isLoading=!0,this.errorMessage="";try{const e=await v.A.post("http://localhost:8000/api/token",this.loginForm);if(e.data&&!0===e.data.success){localStorage.setItem("yamsdigital_session",JSON.stringify(e.data)),this.$store.commit("SET_AUTH_STATUS",!0),this.$store.commit("SET_USER",e.data.data.user);const s="1"===e.data.data.user.role?"/dashboard/statistiques":"/dashboard";await this.$router.replace(s)}else this.errorMessage=e.data?.message||"Erreur lors de l'authentification.",this.isLoading=!1}catch(e){if(this.isLoading=!1,403===e.response?.status&&"compte_suspendu"===e.response?.data?.statut)return void await this.$router.replace("/account-suspended");e.response&&e.response.data&&e.response.data.message?this.errorMessage=e.response.data.message:this.errorMessage="Une erreur est survenue lors de la connexion."}}}}),_=o(1241);const y=(0,_.A)(k,[["render",b],["__scopeId","data-v-4c9b6b8b"]]);var M=y,E=(0,a.pM)({name:"ConnexionView",components:{LoginForm:M},setup(){(0,a.sV)(()=>{n.os.from(".auth-form-container",{opacity:0,y:40,duration:.8,ease:"power2.out"})});const e=e=>{console.log("Tentative de connexion avec:",e)};return{handleLogin:e}}});const S=(0,_.A)(E,[["render",r],["__scopeId","data-v-094d0d06"]]);var C=S}}]);
//# sourceMappingURL=549.39ad8764.js.map