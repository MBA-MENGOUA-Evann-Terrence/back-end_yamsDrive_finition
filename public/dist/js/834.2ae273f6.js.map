{"version":3,"file":"js/834.2ae273f6.js","mappings":"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","sources":["webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/views/dashboard/search/GlobalSearchView.vue?4094","webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/views/dashboard/search/GlobalSearchView.vue","webpack://skeleton-spa-vue3-bootstrap5-primevue-pwa-ts/./src/views/dashboard/search/GlobalSearchView.vue?1ba2"],"sourcesContent":["import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = { class: \"document-view-container\" }\nconst _hoisted_2 = { class: \"view-header\" }\nconst _hoisted_3 = {\n  key: 0,\n  class: \"search-query\"\n}\nconst _hoisted_4 = { class: \"card document-management-card\" }\nconst _hoisted_5 = { class: \"card-body\" }\nconst _hoisted_6 = { class: \"search-results\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"loading-container\"\n}\nconst _hoisted_8 = {\n  key: 1,\n  class: \"no-results\"\n}\nconst _hoisted_9 = { class: \"text-muted\" }\nconst _hoisted_10 = {\n  key: 2,\n  class: \"results-container\"\n}\nconst _hoisted_11 = { class: \"results-count mb-3\" }\nconst _hoisted_12 = { class: \"badge bg-primary\" }\nconst _hoisted_13 = { class: \"table-responsive\" }\nconst _hoisted_14 = { class: \"table table-hover\" }\nconst _hoisted_15 = [\"onClick\"]\nconst _hoisted_16 = { class: \"file-cell\" }\nconst _hoisted_17 = { class: \"file-name\" }\nconst _hoisted_18 = { class: \"badge bg-info\" }\nconst _hoisted_19 = { class: \"text-muted\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[1] || (_cache[1] = _createElementVNode(\"h1\", { class: \"view-title\" }, [\n        _createElementVNode(\"i\", { class: \"fas fa-search me-2\" }),\n        _createTextVNode(\" R√©sultats de recherche \")\n      ], -1)),\n      (_ctx.searchQuery)\n        ? (_openBlock(), _createElementBlock(\"p\", _hoisted_3, [\n            _cache[0] || (_cache[0] = _createTextVNode(\" Recherche pour : \", -1)),\n            _createElementVNode(\"strong\", null, \"\\\"\" + _toDisplayString(_ctx.searchQuery) + \"\\\"\", 1)\n          ]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _createElementVNode(\"div\", _hoisted_5, [\n        _createElementVNode(\"div\", _hoisted_6, [\n          (_ctx.isLoading)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _cache[2] || (_cache[2] = [\n                _createElementVNode(\"i\", { class: \"fas fa-spinner fa-spin fa-3x text-primary\" }, null, -1),\n                _createElementVNode(\"p\", { class: \"mt-3\" }, \"Recherche en cours...\", -1)\n              ])))\n            : (!_ctx.isLoading && _ctx.documents.length === 0)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n                  _cache[3] || (_cache[3] = _createElementVNode(\"i\", { class: \"fas fa-search fa-3x text-muted mb-3\" }, null, -1)),\n                  _cache[4] || (_cache[4] = _createElementVNode(\"h3\", null, \"Aucun r√©sultat trouv√©\", -1)),\n                  _createElementVNode(\"p\", _hoisted_9, \" Aucun document ne correspond √† votre recherche \\\"\" + _toDisplayString(_ctx.searchQuery) + \"\\\" \", 1)\n                ]))\n              : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [\n                  _createElementVNode(\"div\", _hoisted_11, [\n                    _createElementVNode(\"span\", _hoisted_12, _toDisplayString(_ctx.documents.length) + \" r√©sultat(s) trouv√©(s)\", 1)\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_13, [\n                    _createElementVNode(\"table\", _hoisted_14, [\n                      _cache[5] || (_cache[5] = _createElementVNode(\"thead\", null, [\n                        _createElementVNode(\"tr\", null, [\n                          _createElementVNode(\"th\", null, \"Nom du document\"),\n                          _createElementVNode(\"th\", null, \"Service\"),\n                          _createElementVNode(\"th\", null, \"Date de cr√©ation\")\n                        ])\n                      ], -1)),\n                      _createElementVNode(\"tbody\", null, [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.documents, (doc) => {\n                          return (_openBlock(), _createElementBlock(\"tr\", {\n                            key: doc.id,\n                            onClick: ($event: any) => (_ctx.showDocument(doc)),\n                            class: \"cursor-pointer\"\n                          }, [\n                            _createElementVNode(\"td\", null, [\n                              _createElementVNode(\"div\", _hoisted_16, [\n                                _createElementVNode(\"i\", {\n                                  class: _normalizeClass([_ctx.getFileIcon(doc.nom), \"file-icon me-2\"])\n                                }, null, 2),\n                                _createElementVNode(\"span\", _hoisted_17, _toDisplayString(doc.nom), 1)\n                              ])\n                            ]),\n                            _createElementVNode(\"td\", null, [\n                              _createElementVNode(\"span\", _hoisted_18, _toDisplayString(doc.service?.nom || 'N/A'), 1)\n                            ]),\n                            _createElementVNode(\"td\", null, [\n                              _createElementVNode(\"span\", _hoisted_19, _toDisplayString(_ctx.formatDate(doc.created_at)), 1)\n                            ])\n                          ], 8, _hoisted_15))\n                        }), 128))\n                      ])\n                    ])\n                  ])\n                ]))\n        ])\n      ])\n    ])\n  ]))\n}","<template>\n  <div class=\"document-view-container\">\n    <!-- Titre ind√©pendant -->\n    <div class=\"view-header\">\n      <h1 class=\"view-title\">\n        <i class=\"fas fa-search me-2\"></i>\n        R√©sultats de recherche\n      </h1>\n      <p class=\"search-query\" v-if=\"searchQuery\">\n        Recherche pour : <strong>\"{{ searchQuery }}\"</strong>\n      </p>\n    </div>\n\n    <!-- Card contenant les r√©sultats -->\n    <div class=\"card document-management-card\">\n      <div class=\"card-body\">\n        <div class=\"search-results\">\n      <!-- Loader -->\n      <div v-if=\"isLoading\" class=\"loading-container\">\n        <i class=\"fas fa-spinner fa-spin fa-3x text-primary\"></i>\n        <p class=\"mt-3\">Recherche en cours...</p>\n      </div>\n\n      <!-- Aucun r√©sultat -->\n      <div v-else-if=\"!isLoading && documents.length === 0\" class=\"no-results\">\n        <i class=\"fas fa-search fa-3x text-muted mb-3\"></i>\n        <h3>Aucun r√©sultat trouv√©</h3>\n        <p class=\"text-muted\">\n          Aucun document ne correspond √† votre recherche \"{{ searchQuery }}\"\n        </p>\n      </div>\n\n      <!-- R√©sultats -->\n      <div v-else class=\"results-container\">\n        <div class=\"results-count mb-3\">\n          <span class=\"badge bg-primary\">{{ documents.length }} r√©sultat(s) trouv√©(s)</span>\n        </div>\n\n        <div class=\"table-responsive\">\n          <table class=\"table table-hover\">\n            <thead>\n              <tr>\n                <th>Nom du document</th>\n                <th>Service</th>\n                <th>Date de cr√©ation</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"doc in documents\" :key=\"doc.id\" @click=\"showDocument(doc)\" class=\"cursor-pointer\">\n                <td>\n                  <div class=\"file-cell\">\n                    <i :class=\"getFileIcon(doc.nom)\" class=\"file-icon me-2\"></i>\n                    <span class=\"file-name\">{{ doc.nom }}</span>\n                  </div>\n                </td>\n                <td>\n                  <span class=\"badge bg-info\">{{ doc.service?.nom || 'N/A' }}</span>\n                </td>\n                <td>\n                  <span class=\"text-muted\">{{ formatDate(doc.created_at) }}</span>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { useDialog } from 'primevue/usedialog';\nimport apiClient from '@/services/api';\nimport ShowDocument from '../Document/ShowDocument.vue';\n\nexport default defineComponent({\n  name: 'GlobalSearchView',\n  components: {},\n  setup() {\n    const route = useRoute();\n    const dialog = useDialog();\n    return { route, dialog };\n  },\n  data() {\n    return {\n      apiClient: apiClient,\n      searchQuery: '',\n      isLoading: false,\n      documents: [] as any[],\n      allDocuments: [] as any[],\n      filters: {}\n    };\n  },\n  watch: {\n    'route.query.q': {\n      immediate: true,\n      handler(newQuery) {\n        if (newQuery) {\n          this.searchQuery = newQuery.toString();\n          this.performSearch();\n        }\n      }\n    }\n  },\n  mounted() {\n    // √âcouter l'√©v√©nement de recherche globale\n    window.addEventListener('global-search', this.handleGlobalSearch);\n    \n    // √âcouter les changements de filtres globaux\n    window.addEventListener('global-filters-change', this.handleGlobalFiltersChange);\n    \n    // Charger la recherche depuis l'URL ou localStorage\n    const queryFromUrl = this.route.query.q as string;\n    const queryFromStorage = localStorage.getItem('globalSearchQuery');\n    \n    this.searchQuery = queryFromUrl || queryFromStorage || '';\n    \n    // Restaurer les filtres sauvegard√©s\n    try {\n      const savedFilters = localStorage.getItem('globalFilters');\n      if (savedFilters) {\n        this.filters = JSON.parse(savedFilters);\n      }\n    } catch (error) {\n      console.error('Erreur lors de la restauration des filtres:', error);\n    }\n    \n    if (this.searchQuery) {\n      this.performSearch();\n    }\n  },\n  beforeUnmount() {\n    window.removeEventListener('global-search', this.handleGlobalSearch);\n    window.removeEventListener('global-filters-change', this.handleGlobalFiltersChange);\n  },\n  methods: {\n    handleGlobalSearch(event: any) {\n      const query = event.detail?.q || '';\n      if (query) {\n        this.searchQuery = query;\n        this.performSearch();\n      }\n    },\n    async performSearch() {\n      if (!this.searchQuery) return;\n      \n      this.isLoading = true;\n      this.documents = [];\n      \n      try {\n        // Endpoint de recherche globale\n        // Note: apiClient a d√©j√† /api comme baseURL, donc on utilise /documents/search\n        const response = await this.apiClient.get('/documents/search', {\n          params: { q: this.searchQuery }\n        });\n        \n        console.log('üì• R√©ponse compl√®te de l\\'API:', response);\n        console.log('üì¶ response.data:', response.data);\n        console.log('üì¶ Type de response.data:', typeof response.data);\n        console.log('üì¶ Est un tableau?', Array.isArray(response.data));\n        \n        // G√©rer tous les formats possibles de r√©ponse\n        let documentsData = [];\n        \n        if (response.data && response.data.data) {\n          documentsData = response.data.data;\n          console.log('‚úÖ Format: response.data.data');\n        } else if (Array.isArray(response.data)) {\n          documentsData = response.data;\n          console.log('‚úÖ Format: response.data (array)');\n        } else if (response.data && typeof response.data === 'object') {\n          // Parfois l'API retourne un objet avec les documents √† l'int√©rieur\n          const keys = Object.keys(response.data);\n          console.log('üì¶ Cl√©s disponibles:', keys);\n          \n          // Chercher une cl√© qui contient un tableau\n          for (const key of keys) {\n            if (Array.isArray(response.data[key])) {\n              documentsData = response.data[key];\n              console.log(`‚úÖ Format: response.data.${key} (array)`);\n              break;\n            }\n          }\n        }\n        \n        this.allDocuments = documentsData;\n        this.documents = documentsData;\n        console.log(`‚úÖ ${this.documents.length} document(s) trouv√©(s)`);\n        console.log('üìÑ Documents:', this.documents);\n        \n        // Appliquer les filtres si actifs\n        const filterKeys = Object.keys(this.filters);\n        if (filterKeys.length > 0 && filterKeys.some((key: string) => (this.filters as any)[key])) {\n          this.applyFilters(this.filters);\n        }\n      } catch (error: any) {\n        console.error('‚ùå Erreur lors de la recherche:', error);\n        if (error && error.response) {\n          console.error('‚ùå R√©ponse d\\'erreur:', error.response.data);\n          console.error('‚ùå Status:', error.response.status);\n        }\n        this.documents = [];\n      } finally {\n        this.isLoading = false;\n      }\n    },\n    showDocument(document: any) {\n      if (!document) return;\n      \n      // Ouvrir le popup comme dans les autres vues (SharedDocumentsView, DocumentsView, etc.)\n      const extension = document.nom.split('.').pop()?.toLowerCase() || '';\n      const isImage = ['png', 'jpg', 'jpeg', 'gif', 'webp'].includes(extension);\n      const dialogWidth = isImage ? '70vw' : '50vw';\n\n      this.dialog.open(ShowDocument, {\n        props: {\n          header: 'D√©tails du document',\n          style: { width: dialogWidth },\n          modal: true,\n          maximizable: true,\n          closeOnEscape: true\n        },\n        data: {\n          document: document,\n          table: 'search',\n          source: 'search'\n        }\n      });\n    },\n    getFileIcon(filename: string): string {\n      if (!filename) return 'fas fa-file';\n      \n      const ext = filename.split('.').pop()?.toLowerCase();\n      const iconMap: { [key: string]: string } = {\n        pdf: 'fas fa-file-pdf text-danger',\n        doc: 'fas fa-file-word text-primary',\n        docx: 'fas fa-file-word text-primary',\n        xls: 'fas fa-file-excel text-success',\n        xlsx: 'fas fa-file-excel text-success',\n        ppt: 'fas fa-file-powerpoint text-warning',\n        pptx: 'fas fa-file-powerpoint text-warning',\n        jpg: 'fas fa-file-image text-info',\n        jpeg: 'fas fa-file-image text-info',\n        png: 'fas fa-file-image text-info',\n        gif: 'fas fa-file-image text-info',\n        zip: 'fas fa-file-archive text-secondary',\n        rar: 'fas fa-file-archive text-secondary',\n        txt: 'fas fa-file-alt text-muted',\n      };\n      \n      return iconMap[ext || ''] || 'fas fa-file';\n    },\n    applyFilters(filters: any) {\n      console.log('üîç Application des filtres:', filters);\n      \n      this.documents = this.allDocuments.filter(doc => {\n        // Filtre par type\n        if (filters.type) {\n          const docType = this.getDocumentType(doc.nom);\n          if (docType !== filters.type) return false;\n        }\n        \n        // Filtre par personne\n        if (filters.person) {\n          if (doc.user_id !== filters.person) return false;\n        }\n        \n        // Filtre par service\n        if (filters.service) {\n          if (doc.service_id !== filters.service) return false;\n        }\n        \n        return true;\n      });\n      \n      console.log(`‚úÖ ${this.documents.length} document(s) apr√®s filtrage`);\n    },\n    getDocumentType(filename: string): string {\n      if (!filename) return 'other';\n      \n      const ext = filename.split('.').pop()?.toLowerCase();\n      \n      if (ext === 'pdf') return 'pdf';\n      if (['jpg', 'jpeg', 'png', 'gif', 'webp', 'bmp', 'svg'].includes(ext || '')) return 'image';\n      if (['doc', 'docx'].includes(ext || '')) return 'word';\n      if (['xls', 'xlsx'].includes(ext || '')) return 'excel';\n      if (['ppt', 'pptx'].includes(ext || '')) return 'powerpoint';\n      if (['zip', 'rar', '7z', 'tar', 'gz'].includes(ext || '')) return 'archive';\n      if (ext === 'txt') return 'text';\n      \n      return 'other';\n    },\n    handleGlobalFiltersChange(event: any) {\n      const filters = event.detail;\n      console.log('üåç Filtres globaux re√ßus dans GlobalSearchView:', filters);\n      this.filters = filters;\n      this.applyFilters(filters);\n    },\n    formatDate(dateString: string): string {\n      if (!dateString) return 'N/A';\n      \n      const date = new Date(dateString);\n      const now = new Date();\n      const diffTime = Math.abs(now.getTime() - date.getTime());\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n      \n      if (diffDays === 0) {\n        return \"Aujourd'hui\";\n      } else if (diffDays === 1) {\n        return 'Hier';\n      } else if (diffDays < 7) {\n        return `Il y a ${diffDays} jours`;\n      } else {\n        return date.toLocaleDateString('fr-FR', {\n          year: 'numeric',\n          month: 'short',\n          day: 'numeric'\n        });\n      }\n    }\n  }\n});\n</script>\n\n<style scoped>\n.document-view-container {\n  padding: 0;\n}\n\n.view-header {\n  margin-bottom: 24px;\n}\n\n.view-title {\n  font-size: 2rem;\n  font-weight: 700;\n  color: #202124;\n  margin: 0 0 8px 0;\n  display: flex;\n  align-items: center;\n}\n\n.search-query {\n  font-size: 1rem;\n  color: #5f6368;\n  margin: 0;\n}\n\n.document-management-card {\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: none;\n}\n\n.card-body {\n  padding: 1.5rem;\n}\n\n.search-query strong {\n  color: #4285F4;\n}\n\n.search-results {\n  min-height: 400px;\n}\n\n.loading-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n}\n\n.no-results {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 20px;\n  text-align: center;\n}\n\n.no-results h3 {\n  color: #06173c;\n  margin-bottom: 8px;\n}\n\n.results-container {\n  animation: fadeIn 0.3s ease-in;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.results-count {\n  display: flex;\n  align-items: center;\n}\n\n.results-count .badge {\n  font-size: 0.9rem;\n  padding: 8px 16px;\n}\n\n.file-cell {\n  display: flex;\n  align-items: center;\n}\n\n.file-icon {\n  font-size: 1.2rem;\n}\n\n.file-name {\n  font-weight: 500;\n  color: #06173c;\n}\n\n.action-buttons {\n  display: flex;\n  gap: 8px;\n}\n\n.action-buttons .btn {\n  padding: 4px 8px;\n}\n\n.cursor-pointer {\n  cursor: pointer;\n}\n\n.cursor-pointer:hover {\n  background-color: #f8f9fa;\n}\n\n.table-responsive {\n  margin-top: 16px;\n}\n\n.table th {\n  background-color: #f8f9fa;\n  font-weight: 600;\n  color: #06173c;\n  border-bottom: 2px solid #dee2e6;\n}\n\n.table td {\n  vertical-align: middle;\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n  .global-search-view {\n    padding: 16px;\n  }\n  \n  .search-header {\n    padding: 16px;\n  }\n  \n  .search-title {\n    font-size: 1.4rem;\n  }\n  \n  .search-results {\n    padding: 16px;\n  }\n}\n</style>\n","import { render } from \"./GlobalSearchView.vue?vue&type=template&id=56630acc&scoped=true&ts=true\"\nimport script from \"./GlobalSearchView.vue?vue&type=script&lang=ts\"\nexport * from \"./GlobalSearchView.vue?vue&type=script&lang=ts\"\n\nimport \"./GlobalSearchView.vue?vue&type=style&index=0&id=56630acc&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-56630acc\"]])\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","key","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","_createElementVNode","_createTextVNode","searchQuery","_toDisplayString","_createCommentVNode","isLoading","documents","length","_Fragment","_renderList","doc","id","onClick","$event","showDocument","_normalizeClass","getFileIcon","nom","service","formatDate","created_at","defineComponent","name","components","setup","route","useRoute","dialog","useDialog","data","apiClient","allDocuments","filters","watch","immediate","handler","newQuery","this","toString","performSearch","mounted","window","addEventListener","handleGlobalSearch","handleGlobalFiltersChange","queryFromUrl","query","q","queryFromStorage","localStorage","getItem","savedFilters","JSON","parse","error","console","beforeUnmount","removeEventListener","methods","event","detail","response","get","params","log","Array","isArray","documentsData","keys","Object","filterKeys","some","applyFilters","status","document","extension","split","pop","toLowerCase","isImage","includes","dialogWidth","open","ShowDocument","props","header","style","width","modal","maximizable","closeOnEscape","table","source","filename","ext","iconMap","pdf","docx","xls","xlsx","ppt","pptx","jpg","jpeg","png","gif","zip","rar","txt","filter","type","docType","getDocumentType","person","user_id","service_id","dateString","date","Date","now","diffTime","Math","abs","getTime","diffDays","ceil","toLocaleDateString","year","month","day","__exports__"],"sourceRoot":""}